(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{218:function(s,e,n){"use strict";n.r(e);var a=n(0),t=Object(a.a)({},function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"nginx的常见配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx的常见配置","aria-hidden":"true"}},[s._v("#")]),s._v(" nginx的常见配置")]),s._v(" "),n("h2",{attrs:{id:"配置https"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置https","aria-hidden":"true"}},[s._v("#")]),s._v(" 配置https")]),s._v(" "),n("ol",[n("li",[s._v("在 "),n("code",[s._v("/etc/nginx/conf.d")]),s._v(" 新建文件 "),n("code",[s._v("meal.api.qqhxj.cn.conf")]),s._v("\n配置以下内容")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("server\n{\n    listen 443 ssl;\n    server_name meal.api.qqhxj.cn;\n    error_page 404 /404.html;\n    ssl_certificate      ssl/meal.api.qqhxj.cn/meal.api.qqhxj.cn.pem;\n    ssl_certificate_key  ssl/meal.api.qqhxj.cn/meal.api.qqhxj.cn.key;\n    location / {\n        proxy_pass http://127.0.0.1:8080;\n    }\n\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("把对应的证书文件放在 "),n("code",[s._v("ssl/meal.api.qqhxj.cn")])])]),s._v(" "),n("h2",{attrs:{id:"配置反向代理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置反向代理","aria-hidden":"true"}},[s._v("#")]),s._v(" 配置反向代理")]),s._v(" "),n("ol",[n("li",[s._v("在 "),n("code",[s._v("/etc/nginx/conf.d")]),s._v(" 新建文件 "),n("code",[s._v("*.conf")]),s._v(" 如 "),n("code",[s._v("baidu.com.conf")]),s._v(" 配置以下内容")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("server\n{\n    listen 80;\n    server_name baidu.com;\n    error_page 404 /404.html;\n    location / {\n        proxy_pass http://127.0.0.1:8080;\n    }\n\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h2",{attrs:{id:"解决跨域问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解决跨域问题","aria-hidden":"true"}},[s._v("#")]),s._v(" 解决跨域问题")]),s._v(" "),n("p",[s._v("在对用的 "),n("code",[s._v("*.conf")]),s._v("配置以下内容")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("server\n {\n     listen 80;\n     server_name alert.test.qqhxj.cn;\n     proxy_set_header Host $host;                \n     error_page 404 /404.html;\n     location / {\n         proxy_pass http://127.0.0.1:9090;\n         proxy_connect_timeout 4s;                #配置点1\n         proxy_read_timeout 60s;                  #配置点2，如果没效，可以考虑这个时间配置长一点\n         proxy_send_timeout 12s;                  #配置点3\n         proxy_set_header Upgrade $http_upgrade;\n         proxy_set_header Connection \"Upgrade\";\n         add_header 'Access-Control-Allow-Origin' '*';\n         add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';\n         add_header Access-Control-Allow-Headers 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Content-Range,Range';\n         add_header 'Access-Control-Allow-Credentials' 'true';\n          if ($request_method = 'OPTIONS') {\n                         add_header 'Access-Control-Allow-Origin' *;\n                         add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';\n                         add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Content-Range,Range';\n                         add_header 'Access-Control-Max-Age' 1728000;\n                         add_header 'Content-Length' 0; return 200;\n          }\n     }\n\n }\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])])])},[],!1,null,null,null);e.default=t.exports}}]);